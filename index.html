<!DOCTYPE html>
<html style="padding:0; margin: 0; width: 100%; height: 100%">
	<head>
		<!-- Load the Paper.js library -->
		<script type="text/javascript" src="components/gsap/src/uncompressed/TweenMax.js"></script>
		<script type="text/javascript" src="components/paper/dist/paper-full.js"></script>
		<!-- Define inlined PaperScript associate it with myCanvas -->
		<script src="petri.js"></script>
		<script src="demo.js"></script>
		<script type="text/paperscript" canvas="myCanvas">
			var undef = void 0;
			var zoom = 2;


			var backgroundLayer = new Layer();
			var background = new Raster('background');
			background.position = view.center;
			// background.scale(1.5);


			var dishLayer = new Layer();

			var dishShape = new Path.Circle(new Point(0, 0), 30);
			dishShape.fillColor = '#600';

			project.activeLayer.matrix.translate(view.center);//new Point(-100, -100);




var loaded = false;
background.on('load', function() {
	loaded = true;
	onBackgroundLoad();
});
function onBackgroundLoad(event) {
	if (!loaded) return;

	// Transform the raster so that it fills the bounding rectangle
	// of the view:
	background.fitBounds(view.bounds, true);

}


			function resizeLayer(factor, baseValue) {
				// Whenever the window is resized, recenter the path:
				// var layer =  project.activeLayer;

				if (baseValue !== undef) zoom = baseValue;

				zoom = zoom * factor;
				var layer = project.activeLayer;
				console.log("Zoom factor:", zoom);

				// layer.matrix.reset();
				TweenMax.to(layer.matrix, 0.3, {
					scaleX: zoom,
					scaleY: zoom,
					translateX: view.center.x,
					translateY: view.center.y
				});
			}

			function onFrame(event) {
				view.draw();
			};


			function onKeyUp(event) {
				if (event.key === "=" || event.key === "+" ) {
					resizeLayer(1.5);
				}
				if (event.key === "0") {
					resizeLayer(1, 1);
				}
				if (event.key === "-" || event.key === "_" ) {
					resizeLayer(0.66);
				}

				if (event.key === "space" || event.key === "_" ) {
				}
			}

		</script>
	</head>
	<body style="padding:0; margin: 0; width: 100%; height: 100%">
		<canvas id="myCanvas" resize="true" keepalive="true" style="position: absolute; top: 0; left: 0;/>
			
		</canvas><div style="position: absolute; top: -1000em; left: -1000em; overflow: hidden; height: 1px; width: 1px;">
			<img src="./images/bg.jpg" id="background" />
		</div>
	</body>
</html>
